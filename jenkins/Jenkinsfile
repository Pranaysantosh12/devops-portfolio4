pipeline {
    agent any

    environment {
        APP_NAME = "devops-portfolio"
        DEPLOY_FILE = "k8s-deployment.yaml"
    }

    stages {
        stage('Step 1: Clone Repository') {
            steps {
                echo "ðŸ” Cloning GitHub repo..."
                git url: 'https://github.com/Pranaysantosh12/devops-portfolio4.git', branch: 'master', credentialsId: 'jenkins-tokenv2'
            }
        }

        stage('Step 2: Confirm Files Present') {
            steps {
                echo "ðŸ“ Project files loaded:"
                echo " - index.html"
                echo " - about.html"
                echo " - contact.html"
                echo " - ${DEPLOY_FILE}"
            }
        }

        stage('Step 3: Simulate Docker Build') {
            steps {
                echo "ðŸ”§ Simulating Docker image build..."
                echo "Would run: docker build -t ${APP_NAME}:latest ."
                echo "âœ… Docker build simulated successfully."
            }
        }

        stage('Step 4: Simulate Push to Registry') {
            steps {
                echo "ðŸš€ Simulating image push to container registry..."
                echo "Would run: docker push ${APP_NAME}:latest"
                echo "âœ… Push simulated."
            }
        }

        stage('Step 5: Deploy to Kubernetes') {
            steps {
                echo "ðŸ“¦ Simulating Kubernetes deployment using ${DEPLOY_FILE}"
                echo "Would run: kubectl apply -f ${DEPLOY_FILE}"
                echo "âœ… Simulated deployment to Kubernetes cluster."
            }
        }

        stage('Step 6: Final Confirmation') {
            steps {
                echo "ðŸŽ‰ CI/CD pipeline completed successfully!"
                echo "This simulates a full Jenkins -> Kubernetes delivery flow without using Docker or unsafe methods."
            }
        }
    }
}
       
