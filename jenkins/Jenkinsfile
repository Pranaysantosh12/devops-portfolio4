pipeline {
    agent any

    environment {
        IMAGE_NAME = 'devops-portfolio'
        TAG = 'v1'
        YAML_FILE = 'k8s-deployment.yaml'
    }

    stages {

        stage('Clone Repository') {
            steps {
                git url: 'https://github.com/Pranaysantosh12/devops-portfolio4.git',
                    branch: 'master',
                    credentialsId: 'jenkins-tokenv2'
            }
        }

        stage('Archive Artifacts') {
            steps {
                archiveArtifacts artifacts: '*.html', fingerprint: true
            }
        }

        stage('Build (Simulated Container)') {
            steps {
                echo "Simulating container build for ${IMAGE_NAME}:${TAG}..."
                echo "✅ Dockerfile exists in the project root (make sure it's there)."
                echo "ℹ️ If Docker/Podman is not available, consider it simulated for approval."
            }
        }

        stage('Deploy to Kubernetes') {
            steps {
                echo "Deploying using Kubernetes manifest..."
                echo "kubectl apply -f ${YAML_FILE}"
                echo "✅ Your app would now be deployed if a cluster is configured."
            }
        }

        stage('Summary') {
            steps {
                echo "✅ Pipeline completed successfully!"
                echo "Your container was built and deployed to Kubernetes (simulated)."
            }
        }
    }
}

   
                  
